# ============================================================================
# SQL Server Configuration
# ============================================================================

# Required: SQL Server hostname or IP address
# Examples: "sqlserver", "sqlserver.example.com", "192.168.1.100"
MSSQL_HOST=sqlserver

# Optional: SQL Server port (default: 1433)
# Standard SQL Server port is 1433
MSSQL_PORT=1433

# Required: Database name to backup
# This is the name of the database you want to backup
MSSQL_DATABASE=myapp_production

# Optional: SQL Server username (default: sa)
# User must have db_backupoperator or db_owner role
MSSQL_USERNAME=sa

# Required: SQL Server password
# SECURITY: Use a strong password and keep this file secure
MSSQL_PASSWORD=YourStrongPassword123!

# Optional: Trust server certificate (default: true)
# Set to true for self-signed certificates or non-production environments
# Set to false if using properly signed SSL certificates
MSSQL_TRUST_CERT=true

# ============================================================================
# MinIO Configuration
# ============================================================================

# Required: MinIO endpoint URL (include http:// or https://)
# Examples:
#   "http://minio:9000" (Docker internal network)
#   "https://minio.example.com" (external with TLS)
#   "http://192.168.1.50:9000" (IP address)
MINIO_ENDPOINT=http://minio:9000

# Required: MinIO bucket name where backups will be stored
# Note: Bucket must exist before running backups
# You can create it via MinIO console or mc command
MINIO_BUCKET=backups

# Optional: MinIO region (default: us-east-1)
# For MinIO, this can be any value but must be consistent
MINIO_REGION=us-east-1

# Optional: Path prefix within the bucket (default: backups/sqlserver)
# Backups will be stored at: {bucket}/{path}/{model_name}/{timestamp}/
# Example: "backups/backups/sqlserver/sqlserver_backup/2024-12-24T02-00-00/"
MINIO_PATH=backups/sqlserver

# Required: MinIO access key
# SECURITY: Use strong credentials and keep this file secure
MINIO_ACCESS_KEY=minioadmin

# Required: MinIO secret key
# SECURITY: Use strong credentials and keep this file secure
MINIO_SECRET_KEY=minioadmin

# Optional: Upload timeout in seconds (default: 300)
# Increase for large databases or slow network connections
# MINIO_TIMEOUT=300

# Optional: Maximum upload retry attempts (default: 3)
# GoBackup will retry failed uploads this many times
# MINIO_MAX_RETRIES=3

# ============================================================================
# Backup Schedule Configuration
# ============================================================================

# Optional: Cron expression for backup schedule (default: 0 2 * * * = 2 AM daily)
# Format: "minute hour day month weekday"
# 
# Common Examples:
#   0 2 * * *       = Daily at 2 AM
#   0 */6 * * *     = Every 6 hours
#   30 3 * * *      = Daily at 3:30 AM
#   0 0 * * 0       = Weekly on Sunday at midnight
#   0 3 * * 1-5     = Weekdays at 3 AM
#   0 1 1 * *       = First day of month at 1 AM
#   0 * * * *       = Every hour
#   */15 * * * *    = Every 15 minutes
#
# See README.md for more cron schedule examples
BACKUP_CRON=0 2 * * *

# Optional: Run mode - "daemon" for scheduled backups, "once" for single backup
# daemon = Run continuously with scheduled backups (default)
# once = Run a single backup and exit (useful for manual/ad-hoc backups)
RUN_MODE=daemon

# ============================================================================
# Optional Advanced Configuration
# ============================================================================

# Optional: Skip health checks at startup (default: false)
# Set to true to skip SQL Server and MinIO connectivity tests
# Useful if you want faster startup or if health checks are failing incorrectly
SKIP_HEALTH_CHECK=false

# Optional: Working directory for temporary backup files (default: /tmp/gobackup)
# Ensure this directory has sufficient space for your database backups
# You can mount a volume to this path for persistent storage
# WORKDIR=/tmp/gobackup

# Optional: Log level (default: info)
# Options: debug, info, warn, error
# Use "debug" for troubleshooting, "info" for normal operation
# LOG_LEVEL=info

# ============================================================================
# Notes
# ============================================================================
# 
# 1. SECURITY: This file contains sensitive credentials. Keep it secure!
#    - Never commit this file to version control
#    - Use restrictive file permissions (chmod 600 .env)
#    - Consider using Docker secrets or vault solutions for production
#
# 2. REQUIRED vs OPTIONAL:
#    - Required variables MUST be set for the container to work
#    - Optional variables have sensible defaults
#
# 3. TESTING YOUR CONFIGURATION:
#    - Use RUN_MODE=once to test your configuration with a single backup
#    - Check container logs for any errors: docker logs gobackup-sqlserver
#    - Verify backup appears in MinIO bucket
#
# 4. PRODUCTION RECOMMENDATIONS:
#    - Use strong, unique passwords for MSSQL_PASSWORD
#    - Use strong, unique credentials for MinIO (not minioadmin)
#    - Enable TLS for MinIO endpoint (https://)
#    - Set up proper SQL Server user with minimal required permissions
#    - Configure backup retention policies in gobackup.yml
#    - Set up monitoring and alerting for backup failures
#    - Test restore procedures regularly
#
# 5. BACKUP STORAGE:
#    - Ensure MinIO bucket exists before running backups
#    - Monitor MinIO storage capacity
#    - Consider lifecycle policies for old backups
#    - Verify backups are being created successfully
#
# ============================================================================
